<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Test Infographic Options</title>
    <script src="./dist/toggle-button.js"></script>
    <script type="module" src=https://js.arcgis.com/calcite-components/1.0.0-beta.74/calcite.esm.js></script>
    <link rel="stylesheet" type="text/css" href=https://js.arcgis.com/calcite-components/1.0.0-beta.74/calcite.css />
    <style>
        body {
            font-family: arial;
            font-size: 18pt;
            color: #333;
        }
        
        #optionsList {
            position: absolute;
            top: 16px;
        }
        
        #infographic {
            position: absolute;
            top: 16px;
            left: 45%;
            width: 50%;
            height: 90%;
            background-color: #eee;
            ยก
        }
        
        .label-right {
            display: inline-block;
            margin-left: 12px;
            padding-top: 4px;
        }
        
        x-toggle-button {
            float: left;
        }
        
        .switch {
            margin-bottom: 12px;
            width: 300px;
        }
        
        .group {
            background-color: #f9f7f7;
            font-size: 10pt;
            width: 300px;
        }
        
        .theme {
            width: 360px;
        }
        
        .theme input {
            width: 100px;
            color: blue;
            font-size: 13pt;
        }
        
        .group .switch {
            margin-left: 32px;
            width: 240px;
            height: 36px;
            margin-bottom: 8px;
        }
        
        .group label {
            font-size: 16pt;
            padding-top: 5px;
        }
        
        .color label {
            font-size: 16pt;
            padding-top: 4px;
        }
        
        div.group p {
            font-size: 15pt;
            font-weight: bold;
        }
        
        .switch {
            margin-bottom: 12px;
            height: 36pt;
        }
        
        .color {
            margin-bottom: 12px;
            height: 26pt;
        }
        
        .group input {
            float: left;
        }
        
        .arcgisInfographicFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="optionsList">
        <div class="switch" style="margin-bottom: 0">
            <x-toggle-button id="toggleShowHeader" type="round" checked="true" checked-color="#23B036" unchecked-color="#d4d4d4"></x-toggle-button>
            <label class="label-right" for="toggleShowHeader">Show Header</label>
        </div>
        <div class="switch">
            <x-toggle-button id="toggleShowClose" type="round" checked="true" checked-color="#23B036" unchecked-color="#d4d4d4"></x-toggle-button>
            <label class="label-right" for="toggleShowClose">Show Close Button</label>
        </div>
        <div class="group">
            <p>Export Options</p>
            <div class="switch">
                <x-toggle-button id="togglePrint" type="round" checked="true" checked-color="#23B036" unchecked-color="#d4d4d4">
                </x-toggle-button>
                <label class="label-right" for="togglePrint">Print</label>
            </div>
            <div class="switch">
                <x-toggle-button id="toggleImage" type="round" checked="true" checked-color="#23B036" unchecked-color="#d4d4d4">
                </x-toggle-button>
                <label class="label-right" for="toggleImage">Image</label>
            </div>
            <div class="switch">
                <x-toggle-button id="togglePDF" type="round" checked="true" checked-color="#23B036" unchecked-color="#d4d4d4">
                </x-toggle-button>
                <label class="label-right" for="togglePDF">PDF</label>
            </div>
            <div class="switch">
                <x-toggle-button id="toggleDynamic" type="round" checked="true" checked-color="#23B036" unchecked-color="#d4d4d4"></x-toggle-button>
                <label class="label-right" for="toggleDynamic">Dynamic HTML</label>
            </div>
        </div>

        <div class="group theme">
            <p>Theme Colors</p>
            <div class="color">
                <input id="inputBG" />
                <label class="label-right" for="inputBG">Background color</label>
            </div>
            <div class="color">
                <input id="inputTC" />
                <label class="label-right" for="inputTC">Text color</label>
            </div>
            <div class="color">
                <input id="inputHBG" />
                <label class="label-right" for="inputHBG">Header Background</label>
            </div>
            <div class="color">
                <input id="inputHT" />
                <label class="label-right" for="inputHT">Header Text</label>
            </div>
        </div>
        <calcite-button onclick="_createIframe()">Apply</calcite-button>
    </div>
    <div id="infographic"></div>
    <script>
        var _settings = {
            iframeId: "myIframe",

            username: "<your ArcGIS username>",
            token: "<your valid ArcGIS token>",

            reportId: "b737042ee11d4d19ba938a3ca333e673",
            latitude: "34",
            longitude: "-117",
            playerUrl: "https://bao.arcgis.com/InfographicsPlayer/BAMobile/9.2/reportPlayer/ReportPlayerMobile.html",
            options: null,
        };

        // pull options from UI
        var _getOptions = function() {
            function getBoolean(id) {
                let result = false;
                let elem = document.getElementById(id);
                if (elem) {
                    result = (elem.checked);
                }
                return result;
            }

            function addColor(data, name, id) {
                let elem = document.getElementById(id);
                if (elem && elem.value != null && elem.value.trim().length > 0) {
                    data[name] = elem.value.trim();
                    return true;
                }
                return false;
            }

            let obj = {
                // "longitude": _settings.longitude,
                // "latitude": _settings.latitude,
                // "countryCode": "US",
                "showHeader": getBoolean('toggleShowHeader'),
                "showCloseButton": getBoolean('toggleShowClose'),
                "exportOptions": {
                    "print": getBoolean('togglePrint'),
                    "image": getBoolean('toggleImage'),
                    "pdf": getBoolean('togglePDF'),
                    "dynamicHtml": getBoolean('toggleDynamic')
                }
            };
            let themeColors = {};
            let a = addColor(themeColors, "background", 'inputBG');
            let b = addColor(themeColors, "text", 'inputTC');
            let c = addColor(themeColors, "headerBackground", 'inputHBG');
            let d = addColor(themeColors, "headerText", 'inputHTC');
            if (a || b || c || d) {
                obj["theme"] = themeColors;
            }
            return JSON.stringify(obj);
        }

        var _createIframe = function() {
            var container = document.getElementById("infographic");
            container.innerHTML = '<iframe id="' + _settings.iframeId + '" class="arcgisInfographicFrame"></iframe>';
            var iframe = document.getElementById(_settings.iframeId);

            // message the infographic iframe with URL and params
            var areas = _getRings(_settings.latitude, _settings.longitude, 3);
            var params = '{ ' +
                '"server": "https://www.arcgis.com",' +
                '"userId": "' + _settings.username + '",' +
                '"token": "' + _settings.token + '",' +
                '"expires": "' + Math.floor(Date.now() + 86400000.5).toString() + '",' +
                '"reportID": "' + _settings.reportId + '",' +
                '"countryID": "US",' +
                '"hierarchy": "census",' +
                '"analysisAreas": ' + JSON.stringify(areas) + ',' +
                '"options": ' + _getOptions() + ' }';

            console.log('PARAMS=', params);

            // After the iframe loads, we message it with the instructions about
            // the infographic that will be generated
            iframe.onload = function() {
                function _delay() {
                    iframe.contentWindow.postMessage({
                            type: "infographic_parameters",
                            infographicParameters: params,
                        },
                        _settings.playerUrl
                    );
                }
                setTimeout(_delay, 500);
            };

            // instantiate infographic player
            iframe.src = _settings.playerUrl;
        };

        var _analysisAreas = function(count) {
            let arr = [count];

            arr[0] = {
                feature: {
                    geometry: {
                        rings: [
                            [
                                [-112.114395846147, 33.8521344412711],
                                [-112.113196092554, 33.8520998641584],
                                [-112.112002059222, 33.8519962976779],
                                [-112.110819439097, 33.8518242356163],
                                [-112.109653870625, 33.8515844983308],
                                [-112.108510910836, 33.8512782288322],
                                [-112.107396008807, 33.850906887328],
                                [-112.106314479652, 33.8504722442496],
                                [-112.105271479156, 33.8499763718007],
                                [-112.104271979165, 33.8494216340639],
                                [-112.103320743871, 33.8488106757156],
                                [-112.102422307082, 33.848146409402],
                                [-112.101580950608, 33.8474320018367],
                                [-112.100800683844, 33.8466708586877],
                                [-112.100085224665, 33.8458666083253],
                                [-112.099437981724, 33.8450230845083],
                                [-112.098862038214, 33.8441443080931],
                                [-112.098360137206, 33.843234467852],
                                [-112.097934668605, 33.8422979004922],
                                [-112.097587657794, 33.8413390699729],
                                [-112.097320756028, 33.8403625462168],
                                [-112.097135232607, 33.8393729833202],
                                [-112.097031968878, 33.8383750973643],
                                [-112.097011454091, 33.8373736439339],
                                [-112.097073783115, 33.836373395451],
                                [-112.097218656046, 33.8353791184314],
                                [-112.097445379692, 33.8343955507723],
                                [-112.097752870923, 33.8334273791798],
                                [-112.098139661893, 33.8324792168426],
                                [-112.098603907075, 33.8315555814596],
                                [-112.099143392103, 33.830660873725],
                                [-112.099755544361, 33.8297993563726],
                                [-112.100437445281, 33.8289751338808],
                                [-112.101185844268, 33.8281921329321],
                                [-112.101997174219, 33.8274540837226],
                                [-112.10286756853, 33.8267645022073],
                                [-112.103792879527, 33.8261266733679],
                                [-112.104768698227, 33.825543635581],
                                [-112.105790375344, 33.8250181661609],
                                [-112.10685304342, 33.8245527681461],
                                [-112.107951640002, 33.824149658391],
                                [-112.109080931732, 33.8238107570206],
                                [-112.11023553925, 33.8235376782969],
                                [-112.111409962787, 33.8233317229402],
                                [-112.112598608327, 33.8231938719427],
                                [-112.113795814214, 33.8231247819032],
                                [-112.114995878081, 33.8231247819032],
                                [-112.116193083968, 33.8231938719427],
                                [-112.117381729507, 33.8233317229402],
                                [-112.118556153044, 33.8235376782969],
                                [-112.119710760562, 33.8238107570206],
                                [-112.120840052292, 33.824149658391],
                                [-112.121938648874, 33.8245527681461],
                                [-112.12300131695, 33.8250181661609],
                                [-112.124022994067, 33.825543635581],
                                [-112.124998812767, 33.8261266733679],
                                [-112.125924123764, 33.8267645022073],
                                [-112.126794518075, 33.8274540837226],
                                [-112.127605848026, 33.8281921329321],
                                [-112.128354247013, 33.8289751338808],
                                [-112.129036147933, 33.8297993563726],
                                [-112.129648300192, 33.830660873725],
                                [-112.130187785219, 33.8315555814596],
                                [-112.130652030401, 33.8324792168426],
                                [-112.131038821371, 33.8334273791798],
                                [-112.131346312603, 33.8343955507723],
                                [-112.131573036248, 33.8353791184314],
                                [-112.13171790918, 33.836373395451],
                                [-112.131780238203, 33.8373736439339],
                                [-112.131759723416, 33.8383750973643],
                                [-112.131656459687, 33.8393729833202],
                                [-112.131470936266, 33.8403625462168],
                                [-112.1312040345, 33.8413390699729],
                                [-112.130857023689, 33.8422979004922],
                                [-112.130431555088, 33.843234467852],
                                [-112.12992965408, 33.8441443080931],
                                [-112.129353710571, 33.8450230845083],
                                [-112.128706467629, 33.8458666083253],
                                [-112.127991008451, 33.8466708586877],
                                [-112.127210741686, 33.8474320018367],
                                [-112.126369385212, 33.848146409402],
                                [-112.125470948424, 33.8488106757156],
                                [-112.124519713129, 33.8494216340639],
                                [-112.123520213138, 33.8499763718007],
                                [-112.122477212642, 33.8504722442496],
                                [-112.121395683487, 33.850906887328],
                                [-112.120280781458, 33.8512782288322],
                                [-112.119137821669, 33.8515844983308],
                                [-112.117972253198, 33.8518242356163],
                                [-112.116789633072, 33.8519962976779],
                                [-112.11559559974, 33.8520998641584],
                                [-112.114395846147, 33.8521344412711],
                            ],
                        ],
                        spatialReference: {
                            wkid: 4326,
                        },
                    },
                    attributes: {
                        // "OBJECTID":    133,
                        // "RELID": "2fcb8a2f-4207-4239-900c-f6a7ffcf1c0c",
                        RING: 1,
                        DESCRIPTION: "",
                        latitude: 33.83762530669954,
                        longitude: -112.1143958461471,
                        name: "(1 mile)",
                        shortName: "1 mile",
                        description: "Ring: 1 mile radius",
                    },
                },
            };

            if (count >= 2) {
                arr[1] = {
                    feature: {
                        geometry: {
                            rings: [
                                [
                                    [-112.114395846147, 33.8811526077858],
                                    [-112.112467438024, 33.8811228662844],
                                    [-112.110541667882, 33.8810336824647],
                                    [-112.108621170078, 33.8808851783235],
                                    [-112.106708571721, 33.8806775570032],
                                    [-112.104806489068, 33.8804111025117],
                                    [-112.102917523926, 33.8800861793329],
                                    [-112.101044260075, 33.8797032319256],
                                    [-112.099189259725, 33.8792627841127],
                                    [-112.09735505999, 33.878765438362],
                                    [-112.095544169409, 33.8782118749579],
                                    [-112.093759064501, 33.8776028510677],
                                    [-112.092002186363, 33.8769391997008],
                                    [-112.090275937323, 33.876221828565],
                                    [-112.088582677643, 33.8754517188197],
                                    [-112.086924722281, 33.8746299237288],
                                    [-112.085304337719, 33.8737575672142],
                                    [-112.083723738858, 33.8728358423127],
                                    [-112.082185085979, 33.8718660095386],
                                    [-112.08069048179, 33.8708493951532],
                                    [-112.079241968543, 33.8697873893446],
                                    [-112.077841525245, 33.86868144432],
                                    [-112.07649106495, 33.8675330723137],
                                    [-112.075192432144, 33.8663438435117],
                                    [-112.073947400227, 33.8651153838988],
                                    [-112.072757669093, 33.8638493730284],
                                    [-112.071624862811, 33.8625475417193],
                                    [-112.070550527415, 33.8612116696834],
                                    [-112.069536128795, 33.8598435830858],
                                    [-112.068583050704, 33.8584451520423],
                                    [-112.067692592881, 33.8570182880571],
                                    [-112.066865969284, 33.8555649414042],
                                    [-112.066104306445, 33.8540870984558],
                                    [-112.065408641945, 33.8525867789628],
                                    [-112.064779923014, 33.851066033289],
                                    [-112.064219005251, 33.8495269396048],
                                    [-112.063726651472, 33.8479716010431],
                                    [-112.06330353069, 33.8464021428217],
                                    [-112.062950217217, 33.8448207093359],
                                    [-112.0626671899, 33.843229461226],
                                    [-112.06245483149, 33.8416305724226],
                                    [-112.062313428135, 33.8400262271749],
                                    [-112.062243169015, 33.8384186170651],
                                    [-112.062244146104, 33.836809938014],
                                    [-112.062316354065, 33.8352023872808],
                                    [-112.062459690281, 33.8335981604619],
                                    [-112.062673955015, 33.8319994484927],
                                    [-112.062958851707, 33.8304084346568],
                                    [-112.063313987397, 33.828827291605],
                                    [-112.063738873284, 33.8272581783916],
                                    [-112.064232925418, 33.8257032375274],
                                    [-112.064795465509, 33.8241645920582],
                                    [-112.06542572188, 33.8226443426689],
                                    [-112.066122830535, 33.8211445648193],
                                    [-112.066885836358, 33.8196673059151],
                                    [-112.067713694431, 33.8182145825171],
                                    [-112.068605271481, 33.8167883775938],
                                    [-112.069559347437, 33.8153906378195],
                                    [-112.070574617111, 33.8140232709229],
                                    [-112.071649691991, 33.8126881430891],
                                    [-112.072783102147, 33.8113870764186],
                                    [-112.07397329825, 33.8101218464471],
                                    [-112.07521865369, 33.8088941797285],
                                    [-112.076517466806, 33.8077057514856],
                                    [-112.077867963214, 33.8065581833307],
                                    [-112.079268298228, 33.8054530410598],
                                    [-112.080716559389, 33.8043918325225],
                                    [-112.082210769065, 33.8033760055716],
                                    [-112.083748887158, 33.8024069460948],
                                    [-112.085328813883, 33.8014859761296],
                                    [-112.086948392627, 33.8006143520672],
                                    [-112.088605412892, 33.799793262944],
                                    [-112.090297613304, 33.7990238288263],
                                    [-112.092022684689, 33.7983070992876],
                                    [-112.093778273216, 33.7976440519835],
                                    [-112.095561983602, 33.7970355913223],
                                    [-112.097371382366, 33.7964825472375],
                                    [-112.099204001136, 33.7959856740598],
                                    [-112.10105734001, 33.7955456494928],
                                    [-112.102928870946, 33.7951630736924],
                                    [-112.1048160412, 33.7948384684522],
                                    [-112.106716276793, 33.7945722764944],
                                    [-112.108626986008, 33.7943648608689],
                                    [-112.110545562907, 33.7942165044604],
                                    [-112.112469390869, 33.7941274096042],
                                    [-112.114395846147, 33.7940976978115],
                                    [-112.116322301425, 33.7941274096042],
                                    [-112.118246129387, 33.7942165044604],
                                    [-112.120164706286, 33.7943648608689],
                                    [-112.122075415501, 33.7945722764944],
                                    [-112.123975651094, 33.7948384684522],
                                    [-112.125862821348, 33.7951630736924],
                                    [-112.127734352284, 33.7955456494928],
                                    [-112.129587691158, 33.7959856740598],
                                    [-112.131420309928, 33.7964825472375],
                                    [-112.133229708692, 33.7970355913223],
                                    [-112.135013419078, 33.7976440519835],
                                    [-112.136769007606, 33.7983070992876],
                                    [-112.13849407899, 33.7990238288263],
                                    [-112.140186279402, 33.799793262944],
                                    [-112.141843299668, 33.8006143520672],
                                    [-112.143462878412, 33.8014859761296],
                                    [-112.145042805136, 33.8024069460948],
                                    [-112.146580923229, 33.8033760055716],
                                    [-112.148075132906, 33.8043918325225],
                                    [-112.149523394066, 33.8054530410598],
                                    [-112.150923729081, 33.8065581833307],
                                    [-112.152274225488, 33.8077057514856],
                                    [-112.153573038604, 33.8088941797285],
                                    [-112.154818394044, 33.8101218464471],
                                    [-112.156008590147, 33.8113870764186],
                                    [-112.157142000304, 33.8126881430891],
                                    [-112.158217075183, 33.8140232709229],
                                    [-112.159232344857, 33.8153906378195],
                                    [-112.160186420813, 33.8167883775938],
                                    [-112.161077997863, 33.8182145825171],
                                    [-112.161905855936, 33.8196673059151],
                                    [-112.162668861759, 33.8211445648193],
                                    [-112.163365970414, 33.8226443426689],
                                    [-112.163996226785, 33.8241645920582],
                                    [-112.164558766876, 33.8257032375274],
                                    [-112.16505281901, 33.8272581783916],
                                    [-112.165477704898, 33.8288272916051],
                                    [-112.165832840587, 33.8304084346568],
                                    [-112.166117737279, 33.8319994484927],
                                    [-112.166332002013, 33.8335981604619],
                                    [-112.166475338229, 33.8352023872808],
                                    [-112.16654754619, 33.836809938014],
                                    [-112.166548523279, 33.8384186170651],
                                    [-112.166478264159, 33.8400262271749],
                                    [-112.166336860804, 33.8416305724226],
                                    [-112.166124502394, 33.843229461226],
                                    [-112.165841475077, 33.8448207093359],
                                    [-112.165488161604, 33.8464021428217],
                                    [-112.165065040822, 33.8479716010431],
                                    [-112.164572687043, 33.8495269396048],
                                    [-112.16401176928, 33.851066033289],
                                    [-112.163383050349, 33.8525867789628],
                                    [-112.162687385849, 33.8540870984558],
                                    [-112.16192572301, 33.8555649414042],
                                    [-112.161099099413, 33.8570182880571],
                                    [-112.16020864159, 33.8584451520423],
                                    [-112.1592555635, 33.8598435830858],
                                    [-112.158241164879, 33.8612116696834],
                                    [-112.157166829483, 33.8625475417193],
                                    [-112.156034023202, 33.8638493730284],
                                    [-112.154844292068, 33.8651153838988],
                                    [-112.15359926015, 33.8663438435117],
                                    [-112.152300627344, 33.8675330723137],
                                    [-112.150950167049, 33.86868144432],
                                    [-112.149549723751, 33.8697873893446],
                                    [-112.148101210505, 33.8708493951532],
                                    [-112.146606606315, 33.8718660095386],
                                    [-112.145067953436, 33.8728358423127],
                                    [-112.143487354575, 33.8737575672142],
                                    [-112.141866970014, 33.8746299237288],
                                    [-112.140209014652, 33.8754517188197],
                                    [-112.138515754971, 33.876221828565],
                                    [-112.136789505931, 33.8769391997008],
                                    [-112.135032627793, 33.8776028510677],
                                    [-112.133247522885, 33.8782118749579],
                                    [-112.131436632304, 33.878765438362],
                                    [-112.12960243257, 33.8792627841127],
                                    [-112.127747432219, 33.8797032319256],
                                    [-112.125874168368, 33.8800861793329],
                                    [-112.123985203226, 33.8804111025117],
                                    [-112.122083120573, 33.8806775570032],
                                    [-112.120170522217, 33.8808851783235],
                                    [-112.118250024412, 33.8810336824647],
                                    [-112.11632425427, 33.8811228662844],
                                    [-112.114395846147, 33.8811526077858],
                                ],
                            ],
                            spatialReference: {
                                wkid: 4326,
                            },
                        },
                        attributes: {
                            // "OBJECTID":    134,
                            // "RELID":       "2fcb8a2f-4207-4239-900c-f6a7ffcf1c0c",
                            RING: 2,
                            DESCRIPTION: null,
                            latitude: 33.83762530669954,
                            longitude: -112.1143958461471,
                            name: "(3 miles)",
                            shortName: "3 miles",
                            description: "Ring: 3 miles radius",
                        },
                    },
                };
            }

            if (count >= 3) {
                arr[2] = {
                    feature: {
                        geometry: {
                            rings: [
                                [
                                    [-112.114395846147, 33.9101706374158],
                                    [-112.111792940545, 33.910138141192],
                                    [-112.109192370814, 33.9100406816822],
                                    [-112.10659647071, 33.9098783463444],
                                    [-112.10400756977, 33.9096512808539],
                                    [-112.1014279912, 33.909359688972],
                                    [-112.098860049778, 33.9090038323613],
                                    [-112.09630604976, 33.9085840303495],
                                    [-112.093768282797, 33.9081006596407],
                                    [-112.091249025866, 33.9075541539746],
                                    [-112.088750539209, 33.9069450037345],
                                    [-112.086275064297, 33.9062737555045],
                                    [-112.083824821797, 33.905541011575],
                                    [-112.081402009577, 33.9047474293985],
                                    [-112.079008800715, 33.9038937209959],
                                    [-112.076647341541, 33.9029806523127],
                                    [-112.0743197497, 33.9020090425273],
                                    [-112.072028112244, 33.900979763311],
                                    [-112.06977448375, 33.8998937380407],
                                    [-112.067560884472, 33.8987519409651],
                                    [-112.065389298516, 33.897555396325],
                                    [-112.063261672061, 33.8963051774287],
                                    [-112.061179911605, 33.895002405683],
                                    [-112.059145882253, 33.8936482495812],
                                    [-112.05716140604, 33.8922439236492],
                                    [-112.055228260296, 33.8907906873491],
                                    [-112.053348176054, 33.8892898439437],
                                    [-112.051522836494, 33.8877427393211],
                                    [-112.04975387544, 33.886150760781],
                                    [-112.048042875893, 33.8845153357845],
                                    [-112.046391368621, 33.8828379306673],
                                    [-112.044800830788, 33.8811200493189],
                                    [-112.043272684639, 33.8793632318273],
                                    [-112.041808296228, 33.8775690530927],
                                    [-112.040408974205, 33.8757391214086],
                                    [-112.039075968653, 33.8738750770149],
                                    [-112.037810469978, 33.8719785906211],
                                    [-112.036613607849, 33.8700513619038],
                                    [-112.035486450204, 33.8680951179773],
                                    [-112.034430002304, 33.8661116118405],
                                    [-112.033445205846, 33.8641026208016],
                                    [-112.032532938135, 33.8620699448799],
                                    [-112.031694011314, 33.8600154051891],
                                    [-112.030929171651, 33.8579408423011],
                                    [-112.030239098892, 33.8558481145934],
                                    [-112.029624405667, 33.8537390965805],
                                    [-112.029085636959, 33.8516156772316],
                                    [-112.028623269638, 33.849479758276],
                                    [-112.028237712053, 33.8473332524971],
                                    [-112.027929303685, 33.8451780820171],
                                    [-112.027698314861, 33.8430161765741],
                                    [-112.027544946539, 33.8408494717927],
                                    [-112.027469330143, 33.8386799074499],
                                    [-112.027471527472, 33.8365094257375],
                                    [-112.027551530657, 33.8343399695235],
                                    [-112.027709262201, 33.8321734806128],
                                    [-112.027944575057, 33.8300118980094],
                                    [-112.028257252792, 33.8278571561824],
                                    [-112.028647009792, 33.8257111833353],
                                    [-112.029113491544, 33.8235758996828],
                                    [-112.029656274972, 33.8214532157338],
                                    [-112.030274868834, 33.8193450305852],
                                    [-112.030968714183, 33.8172532302248],
                                    [-112.031737184884, 33.8151796858475],
                                    [-112.032579588195, 33.8131262521848],
                                    [-112.0334951654, 33.8110947658492],
                                    [-112.034483092511, 33.8090870436961],
                                    [-112.035542481015, 33.8071048812026],
                                    [-112.036672378688, 33.8051500508668],
                                    [-112.037871770463, 33.8032243006276],
                                    [-112.039139579345, 33.8013293523067],
                                    [-112.040474667393, 33.7994669000746],
                                    [-112.041875836748, 33.7976386089416],
                                    [-112.043341830715, 33.7958461132745],
                                    [-112.044871334895, 33.7940910153423],
                                    [-112.046462978373, 33.7923748838894],
                                    [-112.048115334945, 33.7906992527396],
                                    [-112.049826924409, 33.7890656194321],
                                    [-112.051596213884, 33.7874754438889],
                                    [-112.053421619192, 33.7859301471167],
                                    [-112.055301506275, 33.7844311099438],
                                    [-112.057234192657, 33.7829796717923],
                                    [-112.059217948952, 33.781577129488],
                                    [-112.061251000406, 33.7802247361083],
                                    [-112.063331528483, 33.7789236998687],
                                    [-112.065457672492, 33.77767518305],
                                    [-112.06762753124, 33.7764803009661],
                                    [-112.069839164732, 33.7753401209737],
                                    [-112.072090595897, 33.7742556615248],
                                    [-112.074379812349, 33.7732278912627],
                                    [-112.076704768177, 33.7722577281629],
                                    [-112.079063385765, 33.7713460387177],
                                    [-112.08145355764, 33.7704936371683],
                                    [-112.083873148343, 33.769701284782],
                                    [-112.086319996329, 33.7689696891772],
                                    [-112.088791915882, 33.7682995036958],
                                    [-112.091286699061, 33.7676913268239],
                                    [-112.093802117654, 33.7671457016608],
                                    [-112.096335925158, 33.7666631154383],
                                    [-112.098885858771, 33.7662439990875],
                                    [-112.101449641398, 33.7658887268581],
                                    [-112.104024983671, 33.7655976159858],
                                    [-112.106609585976, 33.7653709264115],
                                    [-112.109201140495, 33.7652088605505],
                                    [-112.111797333248, 33.7651115631136],
                                    [-112.114395846147, 33.7650791209787],
                                    [-112.116994359046, 33.7651115631136],
                                    [-112.1195905518, 33.7652088605505],
                                    [-112.122182106319, 33.7653709264115],
                                    [-112.124766708624, 33.7655976159858],
                                    [-112.127342050896, 33.7658887268581],
                                    [-112.129905833523, 33.7662439990875],
                                    [-112.132455767136, 33.7666631154382],
                                    [-112.13498957464, 33.7671457016608],
                                    [-112.137504993233, 33.7676913268239],
                                    [-112.139999776412, 33.7682995036958],
                                    [-112.142471695965, 33.7689696891772],
                                    [-112.144918543951, 33.769701284782],
                                    [-112.147338134655, 33.7704936371683],
                                    [-112.149728306529, 33.7713460387177],
                                    [-112.152086924117, 33.7722577281629],
                                    [-112.154411879945, 33.7732278912627],
                                    [-112.156701096397, 33.7742556615248],
                                    [-112.158952527563, 33.7753401209737],
                                    [-112.161164161055, 33.7764803009661],
                                    [-112.163334019803, 33.77767518305],
                                    [-112.165460163811, 33.7789236998687],
                                    [-112.167540691888, 33.7802247361083],
                                    [-112.169573743342, 33.781577129488],
                                    [-112.171557499637, 33.7829796717923],
                                    [-112.17349018602, 33.7844311099438],
                                    [-112.175370073103, 33.7859301471167],
                                    [-112.177195478411, 33.7874754438889],
                                    [-112.178964767885, 33.7890656194321],
                                    [-112.180676357349, 33.7906992527396],
                                    [-112.182328713921, 33.7923748838894],
                                    [-112.183920357399, 33.7940910153423],
                                    [-112.185449861579, 33.7958461132746],
                                    [-112.186915855546, 33.7976386089416],
                                    [-112.188317024901, 33.7994669000746],
                                    [-112.18965211295, 33.8013293523067],
                                    [-112.190919921831, 33.8032243006276],
                                    [-112.192119313606, 33.8051500508668],
                                    [-112.193249211279, 33.8071048812026],
                                    [-112.194308599784, 33.8090870436961],
                                    [-112.195296526894, 33.8110947658492],
                                    [-112.1962121041, 33.8131262521848],
                                    [-112.19705450741, 33.8151796858475],
                                    [-112.197822978111, 33.8172532302248],
                                    [-112.19851682346, 33.8193450305852],
                                    [-112.199135417323, 33.8214532157338],
                                    [-112.19967820075, 33.8235758996828],
                                    [-112.200144682503, 33.8257111833353],
                                    [-112.200534439502, 33.8278571561824],
                                    [-112.200847117237, 33.8300118980094],
                                    [-112.201082430093, 33.8321734806128],
                                    [-112.201240161637, 33.8343399695235],
                                    [-112.201320164823, 33.8365094257375],
                                    [-112.201322362151, 33.8386799074499],
                                    [-112.201246745756, 33.8408494717927],
                                    [-112.201093377433, 33.8430161765741],
                                    [-112.20086238861, 33.8451780820171],
                                    [-112.200553980241, 33.8473332524971],
                                    [-112.200168422656, 33.849479758276],
                                    [-112.199706055336, 33.8516156772316],
                                    [-112.199167286628, 33.8537390965805],
                                    [-112.198552593402, 33.8558481145934],
                                    [-112.197862520643, 33.8579408423011],
                                    [-112.19709768098, 33.8600154051891],
                                    [-112.196258754159, 33.8620699448799],
                                    [-112.195346486448, 33.8641026208016],
                                    [-112.19436168999, 33.8661116118405],
                                    [-112.19330524209, 33.8680951179773],
                                    [-112.192178084446, 33.8700513619038],
                                    [-112.190981222316, 33.8719785906211],
                                    [-112.189715723641, 33.8738750770149],
                                    [-112.188382718089, 33.8757391214086],
                                    [-112.186983396067, 33.8775690530927],
                                    [-112.185519007655, 33.8793632318273],
                                    [-112.183990861506, 33.8811200493189],
                                    [-112.182400323673, 33.8828379306673],
                                    [-112.180748816401, 33.8845153357845],
                                    [-112.179037816854, 33.886150760781],
                                    [-112.1772688558, 33.8877427393211],
                                    [-112.17544351624, 33.8892898439437],
                                    [-112.173563431998, 33.8907906873491],
                                    [-112.171630286254, 33.8922439236492],
                                    [-112.169645810041, 33.8936482495812],
                                    [-112.167611780689, 33.895002405683],
                                    [-112.165530020233, 33.8963051774287],
                                    [-112.163402393778, 33.8975553963251],
                                    [-112.161230807822, 33.8987519409651],
                                    [-112.159017208544, 33.8998937380407],
                                    [-112.15676358005, 33.900979763311],
                                    [-112.154471942594, 33.9020090425273],
                                    [-112.152144350753, 33.9029806523127],
                                    [-112.149782891579, 33.9038937209959],
                                    [-112.147389682717, 33.9047474293985],
                                    [-112.144966870497, 33.905541011575],
                                    [-112.142516627998, 33.9062737555045],
                                    [-112.140041153085, 33.9069450037345],
                                    [-112.137542666428, 33.9075541539746],
                                    [-112.135023409497, 33.9081006596407],
                                    [-112.132485642534, 33.9085840303495],
                                    [-112.129931642516, 33.9090038323613],
                                    [-112.127363701094, 33.909359688972],
                                    [-112.124784122524, 33.9096512808539],
                                    [-112.122195221584, 33.9098783463444],
                                    [-112.11959932148, 33.9100406816822],
                                    [-112.116998751749, 33.910138141192],
                                    [-112.114395846147, 33.9101706374158],
                                ],
                            ],
                            spatialReference: {
                                wkid: 4326,
                            },
                        },
                        attributes: {
                            // "OBJECTID":    135,
                            // "RELID": "2fcb8a2f-4207-4239-900c-f6a7ffcf1c0c",
                            RING: 3,
                            DESCRIPTION: null,
                            latitude: 33.83762530669954,
                            longitude: -112.1143958461471,
                            name: "(5 miles)",
                            shortName: "5 miles",
                            description: "Ring: 5 miles radius",
                        },
                    },
                };
            }

            return arr;
        };
        var _getRings = function(latitude, longitude, count) {
            var ii, ring;
            const analysis = _analysisAreas(count);
            var xAdj, yAdj;

            for (ii = 0; ii < count; ii++) {
                if (ii >= count) {
                    analysis[ii] = null;
                } else {
                    ring = analysis[ii];
                    xAdj = longitude - ring.feature.attributes.longitude;
                    yAdj = latitude - ring.feature.attributes.latitude;
                    let coords = ring.feature.geometry.rings[0];
                    coords.forEach((cd) => {
                        cd[0] += xAdj;
                        cd[1] += yAdj;
                    });

                    ring.feature.attributes.latitude = latitude;
                    ring.feature.attributes.longitude = longitude;
                }
            }
            return analysis;
        };
    </script>
</body>

</html>